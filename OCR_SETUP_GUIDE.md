# OCR 图片识别功能使用指南

## 功能说明

OCR（Optical Character Recognition）图片识别功能可以将图片中的文字提取出来，支持中英文混合识别。

## 功能特点

- ✅ 支持多种图片格式（JPG、PNG、BMP等）
- ✅ 中英文混合识别
- ✅ 实时预览上传的图片
- ✅ 逐行显示识别结果
- ✅ 一键复制识别文本
- ✅ 下载识别结果为TXT文件
- ✅ 识别历史记录
- ✅ 拖拽上传支持

## 访问路径

登录管理后台后，在左侧菜单中找到：**AI服务 > OCR识别**

或直接访问：`http://localhost:3000/ai/ocr`

## 使用步骤

### 1. 上传图片

- 点击上传区域选择图片文件
- 或直接拖拽图片到上传区域
- 支持最大 10MB 的图片文件

### 2. 开始识别

- 上传后会显示图片预览
- 点击"开始识别"按钮
- 等待识别完成（通常几秒钟）

### 3. 查看结果

- 右侧会显示识别出的文本
- 可以查看逐行文本列表
- 显示识别的总行数

### 4. 操作结果

- **复制**：一键复制识别文本到剪贴板
- **下载**：将识别结果保存为TXT文件
- **查看历史**：在底部查看之前的识别记录

## OCR 服务配置

OCR 功能需要后端 OCR 服务支持。有两种启动方式：

### 方式1：Docker 启动（推荐）

```bash
cd ocr-service
docker-compose up -d
```

### 方式2：本地 Python 启动

需要安装 Python 3.8+ 和相关依赖：

```bash
cd ocr-service
pip install -r requirements.txt
python app.py
```

Windows 用户可以直接双击 `ocr-service/start.bat`

### 检查服务状态

OCR 服务默认运行在 `http://localhost:5100`

可以访问健康检查接口：`http://localhost:5100/health`

如果返回 `{"status": "ok"}` 说明服务正常运行。

## 环境变量配置

在 `.env` 文件中可以配置 OCR 服务地址：

```env
OCR_SERVICE_URL=http://localhost:5100
```

## 常见问题

### Q: 识别失败，提示"OCR 服务不可用"

**A:** 请确保 OCR 服务已启动：
1. 检查 `http://localhost:5100/health` 是否可访问
2. 查看 OCR 服务日志是否有错误
3. 确认防火墙没有阻止 5100 端口

### Q: 识别速度慢

**A:** 
- 如果使用 CPU 模式，识别速度会较慢
- 建议使用 GPU 加速（需要 NVIDIA GPU + CUDA）
- 或者使用 Docker 方式运行

### Q: 识别准确率不高

**A:**
- 确保图片清晰，文字不要太小
- 避免图片倾斜或变形
- 中英文混合时，建议文字排列整齐

### Q: 支持哪些图片格式？

**A:** 支持常见的图片格式：
- JPG/JPEG
- PNG
- BMP
- GIF（静态）
- TIFF

## 技术架构

- **前端**：Vue 3 + Ant Design Vue
- **后端**：Express.js + TypeScript
- **OCR引擎**：PaddleOCR（百度开源）
- **模型**：PP-OCRv4 轻量级模型

## 性能指标

- 单张图片识别时间：1-3秒（CPU模式）
- 单张图片识别时间：0.5-1秒（GPU模式）
- 支持的最大图片尺寸：10MB
- 识别准确率：95%+（清晰图片）

## 更新日志

### v1.0.0 (2026-01-16)
- ✅ 初始版本发布
- ✅ 支持单图片识别
- ✅ 支持拖拽上传
- ✅ 识别历史记录
- ✅ 结果复制和下载

## 后续计划

- [ ] 批量图片识别
- [ ] PDF 文件 OCR
- [ ] 表格识别
- [ ] 手写文字识别
- [ ] 多语言支持（日韩等）
